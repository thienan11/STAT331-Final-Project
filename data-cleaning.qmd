---
title: "data-cleaning"
author: "Thien An Tran", "Tejasree Kandibanda", "Matthew Huang", "Chloe Anbarcioglu"
format: 
  html:
    embed-resources: true
    code-tools: true
    toc: true
editor: source
execute: 
  error: true
  echo: true
  message: false
  warning: false
---

## Setup

```{r setup}
library("tidyverse")
murders <- read_csv("data/murder_total_deaths.csv")
happiness <- read_csv("data/hapiscore_whr.csv")
population <- read_csv("data/pop.csv")
```

## Data Cleaning

Converting Murder Counts to observations
```{r}

murders_clean <- murders
  



```

```{r}
convert_population <- function(pop_val) {
  pop_val <- as.character(pop_val)
  
  multiplier <- case_when(
    str_detect(pop_val, "k") ~ 1e3,
    str_detect(pop_val, "M") ~ 1e6,
    str_detect(pop_val, "B") ~ 1e9,
    TRUE ~ 1
  )
  
  numeric_value <- as.numeric(str_remove_all(pop_val, "[kMB]"))
  
  return(numeric_value * multiplier)
}

population_clean <- population |>
  filter(country != "Holy See") |>
  select("country", "1905":"2019") |>
  pivot_longer(cols = "1905":"2019",
               names_to = "Year",
               values_to = "Population") |>
  mutate(across(Population, ~convert_population(.)))

population_clean
```

###Joining Datasets
